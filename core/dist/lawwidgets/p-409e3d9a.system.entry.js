var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++){if(o||!(n in t)){if(!o)o=Array.prototype.slice.call(t,0,n);o[n]=t[n]}}return e.concat(o||Array.prototype.slice.call(t))};
/*!
 * (C) Law Widgets https://laws.africa - MIT License
 */System.register(["./p-15bc3e28.system.js","./p-30777628.system.js"],(function(e){"use strict";var t,r,n,i,o,s;return{setters:[function(e){t=e.r;r=e.h;n=e.H;i=e.g},function(e){o=e.P;s=e.g}],execute:function(){var a=e("la_table_of_contents",function(){function e(e){t(this,e);this.items=[];this.titleFilter="";this.expanded=true;this.fetch=false;this.provider=o;this.filteredItems=null;this.innerItems=[];this.expandIconHtml="";this.collapseIconHtml=""}e.prototype.parseItemsProp=function(e){if(typeof e==="string"){this.innerItems=JSON.parse(e)}else if(Array.isArray(e)){this.innerItems=__spreadArray([],e,true)}};e.prototype.refetch=function(){this.fetchContent()};e.prototype.fetchContent=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,n;return __generator(this,(function(i){switch(i.label){case 0:this.ensurePartner();if(!(this.fetch&&this.frbrExpressionUri&&this.provider))return[3,6];e=this.provider+"/p/"+this.partner+"/e/we/toc.json"+this.frbrExpressionUri;i.label=1;case 1:i.trys.push([1,5,,6]);return[4,fetch(e)];case 2:t=i.sent();if(!t.ok)return[3,4];r=this;return[4,t.json()];case 3:r.innerItems=i.sent().toc;i.label=4;case 4:return[3,6];case 5:n=i.sent();return[3,6];case 6:return[2]}}))}))};e.prototype.ensurePartner=function(){if(!this.partner){this.partner=s()}};e.prototype.getSlotHTML=function(e){var t;var r=this.el.querySelector(e);if(r===null||r===void 0?void 0:r.querySelector(e)){return((t=r.querySelector(e))===null||t===void 0?void 0:t.innerHTML)||""}return(r===null||r===void 0?void 0:r.innerHTML)||""};e.prototype.componentWillLoad=function(){this.expandIconHtml=this.getSlotHTML("[slot='expand-icon']");this.collapseIconHtml=this.getSlotHTML("[slot='collapse-icon']");this.parseItemsProp(this.items);this.titleFilterChanged(this.titleFilter);this.fetchContent()};e.prototype.expandAll=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){Array.from(this.el.querySelectorAll("la-toc-item")).forEach((function(e){e.expanded=true}));return[2]}))}))};e.prototype.collapseAll=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){Array.from(this.el.querySelectorAll("la-toc-item")).forEach((function(e){e.expanded=false}));return[2]}))}))};e.prototype.titleFilterChanged=function(e){if(e){var t=e.toLocaleLowerCase().trim();var r=new Set;function n(e){for(var t=0,i=e.children||[];t<i.length;t++){var o=i[t];r.add(o);n(o)}}function i(e){var o;var s=(((o=e.title)===null||o===void 0?void 0:o.toLocaleLowerCase())||"").includes(t);if(s){n(e)}else{if(e.children){for(var a=0,l=e.children;a<l.length;a++){var c=l[a];s=i(c)||s}}}if(s){r.add(e)}return s}for(var o=0,s=this.innerItems;o<s.length;o++){var a=s[o];i(a)}this.filteredItems=r}else{this.filteredItems=null}this.expandAll()};e.prototype.renderItem=function(e){var t=this;var n=(e.children||[]).map((function(e){return t.renderItem(e)}));var i=e.expanded===undefined?this.expanded:e.expanded;return r("la-toc-item",{item:e,filteredItems:this.filteredItems,expandIconHtml:this.expandIconHtml,collapseIconHtml:this.collapseIconHtml,expanded:i},n)};e.prototype.render=function(){var e=this;return r(n,null,r("div",{style:{display:"none"}},r("slot",{name:"expand-icon"}),r("slot",{name:"collapse-icon"})),this.innerItems.map((function(t){return e.renderItem(t)})))};Object.defineProperty(e.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{items:["parseItemsProp"],provider:["refetch"],frbrExpressionUri:["refetch"],fetch:["refetch"],titleFilter:["titleFilterChanged"]}},enumerable:false,configurable:true});return e}())}}}));