var __awaiter=this&&this.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{f(i.next(t))}catch(t){s(t)}}function a(t){try{f(i["throw"](t))}catch(t){s(t)}}function f(t){t.done?n(t.value):r(t.value).then(o,a)}f((i=i.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return f([t,e])}}function f(a){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(n=0)),n)try{if(i=1,r&&(s=a[0]&2?r["return"]:a[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;if(r=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(a[0]===6&&n.label<s[1]){n.label=s[1];s=a;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(a);break}if(s[2])n.ops.pop();n.trys.pop();continue}a=e.call(t,n)}catch(t){a=[6,t];r=0}finally{i=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++){if(s||!(i in e)){if(!s)s=Array.prototype.slice.call(e,0,i);s[i]=e[i]}}return t.concat(s||Array.prototype.slice.call(e))};
/*!
 * (C) Law Widgets https://laws.africa - GNU Lesser General Public License 3
 */System.register(["./p-6fd50c4f.system.js","./p-222e40de.system.js"],(function(t){"use strict";var e,n,i,r,s,o;return{setters:[function(t){e=t.r;n=t.h;i=t.H;r=t.g},function(t){s=t.P;o=t.g}],execute:function(){var a=t("la_table_of_contents",function(){function t(t){e(this,t);this.expandIconHtml="";this.collapseIconHtml="";this.items=[];this.titleFilter="";this.expanded=true;this.frbrExpressionUri=undefined;this.fetch=false;this.partner=undefined;this.provider=s;this.filteredItems=null;this.innerItems=[]}t.prototype.parseItemsProp=function(t){if(typeof t==="string"){this.innerItems=JSON.parse(t)}else if(Array.isArray(t)){this.innerItems=__spreadArray([],t,true)}};t.prototype.refetch=function(){this.fetchContent()};t.prototype.fetchContent=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,n,i;return __generator(this,(function(r){switch(r.label){case 0:this.ensurePartner();if(!(this.fetch&&this.frbrExpressionUri&&this.provider))return[3,6];t=this.provider+"/p/"+this.partner+"/e/we/toc.json"+this.frbrExpressionUri;r.label=1;case 1:r.trys.push([1,5,,6]);return[4,fetch(t)];case 2:e=r.sent();if(!e.ok)return[3,4];n=this;return[4,e.json()];case 3:n.innerItems=r.sent().toc;r.label=4;case 4:return[3,6];case 5:i=r.sent();return[3,6];case 6:return[2]}}))}))};t.prototype.ensurePartner=function(){if(!this.partner){this.partner=o()}};t.prototype.getSlotHTML=function(t){var e;var n=this.el.querySelector(t);if(n===null||n===void 0?void 0:n.querySelector(t)){return((e=n.querySelector(t))===null||e===void 0?void 0:e.innerHTML)||""}return(n===null||n===void 0?void 0:n.innerHTML)||""};t.prototype.componentWillLoad=function(){this.expandIconHtml=this.getSlotHTML("[slot='expand-icon']");this.collapseIconHtml=this.getSlotHTML("[slot='collapse-icon']");this.parseItemsProp(this.items);this.titleFilterChanged(this.titleFilter);this.fetchContent()};t.prototype.expandAll=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){Array.from(this.el.querySelectorAll("la-toc-item")).forEach((function(t){t.expanded=true}));return[2]}))}))};t.prototype.collapseAll=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){Array.from(this.el.querySelectorAll("la-toc-item")).forEach((function(t){t.expanded=false}));return[2]}))}))};t.prototype.titleFilterChanged=function(t){if(t){var e=t.toLocaleLowerCase().trim();var n=new Set;function o(t){for(var e=0,i=t.children||[];e<i.length;e++){var r=i[e];n.add(r);o(r)}}function a(t){var i;var r=(((i=t.title)===null||i===void 0?void 0:i.toLocaleLowerCase())||"").includes(e);if(r){o(t)}else{if(t.children){for(var s=0,f=t.children;s<f.length;s++){var u=f[s];r=a(u)||r}}}if(r){n.add(t)}return r}for(var i=0,r=this.innerItems;i<r.length;i++){var s=r[i];a(s)}this.filteredItems=n}else{this.filteredItems=null}this.expandAll()};t.prototype.renderItem=function(t){var e=this;var i=(t.children||[]).map((function(t){return e.renderItem(t)}));var r=t.expanded===undefined?this.expanded:t.expanded;return n("la-toc-item",{item:t,filteredItems:this.filteredItems,expandIconHtml:this.expandIconHtml,collapseIconHtml:this.collapseIconHtml,expanded:r},i)};t.prototype.render=function(){var t=this;return n(i,{key:"f8b5eaf0e2c359af4eea3b7d6ab3fcad94f393bb"},n("div",{key:"ddca6abce36c9be705a172c12e833a6f9d088b89",style:{display:"none"}},n("slot",{key:"6f55f20f2cb614bb7a7519c44a71f2f94ff60b14",name:"expand-icon"}),n("slot",{key:"9bc755de6658047c64c1c3f5e42a4b6342a883f8",name:"collapse-icon"})),this.innerItems.map((function(e){return t.renderItem(e)})))};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{items:["parseItemsProp"],provider:["refetch"],frbrExpressionUri:["refetch"],fetch:["refetch"],titleFilter:["titleFilterChanged"]}},enumerable:false,configurable:true});return t}())}}}));
//# sourceMappingURL=p-c6fcf69b.system.entry.js.map