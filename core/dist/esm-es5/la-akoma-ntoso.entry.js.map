{"version":3,"names":["akomaNtosoCss","LaAkomaNtosoStyle0","AkomaNtoso","PROVIDER","class_1","prototype","refetch","this","fetchContent","parseFrbrExpressionUri","newValue","_this","ex","regExp","RegExp","output","exec","groups","Object","keys","forEach","key","_a","frbrCountry","frbrType","frbrSubtype","frbrAuthor","frbrDate","frbrNumber","frbrExpressionDate","replace","frbrLanguage","ensurePartner","fetch","frbrExpressionUri","provider","url","partner","resp","_c","sent","ok","_b","el","text","innerHTML","getPartner","componentWillLoad"],"sources":["src/components/akoma-ntoso/akoma-ntoso.scss?tag=la-akoma-ntoso","src/components/akoma-ntoso/akoma-ntoso.tsx"],"sourcesContent":["@import url(\"https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i\");\n\n@import \"@lawsafrica/law-widget-styles/scss/mixins\";\n@import \"@lawsafrica/law-widget-styles/scss/variables\";\n@import \"@lawsafrica/law-widget-styles/scss/mixins/structure\";\n\nla-akoma-ntoso {\n  display: block;\n\n  &.flash-target {\n    @keyframes fadeout {\n      from {\n        background-color: yellow;\n      }\n      to {\n        background-color: unset;\n      }\n    }\n\n    :target {\n      animation: fadeout 2s;\n    }\n  }\n\n  // all AKN styling from law-widget-styles\n  @include law-widget-styles;\n\n  // traditions\n  &[frbr-country^=\"ke\"] {\n    @include tradition-ke;\n  }\n  &[frbr-country^=\"na\"] {\n    @include tradition-na;\n  }\n  &[frbr-country^=\"pl\"] {\n    @include tradition-pl;\n  }\n\n  // structural markup\n  &.show-structure,\n  &.show-structure-hier {\n    @include show-structure-hier;\n  }\n\n  &.show-structure,\n  &.show-structure-block {\n    @include show-structure-block;\n  }\n\n  &.show-structure,\n  &.show-structure-inline {\n    @include show-structure-inline;\n  }\n\n  &.show-structure,\n  &.show-structure-subflow {\n    @include show-structure-subflow;\n  }\n\n  &.show-structure,\n  &.show-structure-doc-container {\n    @include show-structure-doc-container;\n  }\n}\n","import { Component, Element, Prop, Watch } from '@stencil/core';\n\nimport { PROVIDER, getPartner } from '../../utils/services';\n\n@Component({\n  tag: 'la-akoma-ntoso',\n  styleUrl: 'akoma-ntoso.scss',\n})\nexport class AkomaNtoso {\n  /**\n   * Full Akoma Ntoso FRBR Expression URI used to populate the other `frbr` fields if they are unset.\n   * Setting this is the preferred mechanism for ensuring tradition-specific styling.\n   * */\n  @Prop({ reflect: true, mutable: true }) frbrExpressionUri?: string;\n  /**\n   * Country (a two-letter or code according to ISO 3166-1 [ISO3166] or a short and unique alphanumeric codes\n   * according to ISO 3166-2 [ISO3166-2]).\n   * */\n  @Prop({ reflect: true, mutable: true }) frbrCountry?: string;\n  /**\n   * Type of document\n   *\n   * - For legislation – Acts, Regulations, Statutory Instruments, and the like – use `act`.\n   *\n   * - For case law, use `judgment`.\n   *\n   * - For other documents – Policies, Memoranda of Understanding, Yearbooks, Press Releases, and the like – use `doc`.\n   * */\n  @Prop({ reflect: true, mutable: true }) frbrType?: string;\n  /** Subtype used if the document is anything other an `act` / `statement` / `judgment` / `doc` */\n  @Prop({ reflect: true, mutable: true }) frbrSubtype?: string;\n  /** The emanating actor, unless implicitly deducible by the document type (e.g., acts and bills do not usually\n   *  require actor, while ministerial decrees and European legislation do)\n   *  */\n  @Prop({ reflect: true, mutable: true }) frbrAuthor?: string;\n  /** Original creation date (expressed in `YYYY-MM-DD` format or just `YYYY` if the year is sufficient for\n   * identification purposes\n   * */\n  @Prop({ reflect: true, mutable: true }) frbrDate?: string;\n  /**\n   * Number or title or other disambiguating feature of the Work (when appropriate, otherwise optionally the string nn)\n   * */\n  @Prop({ reflect: true, mutable: true }) frbrNumber?: string;\n  /** Any content-specification date */\n  @Prop({ reflect: true, mutable: true }) frbrExpressionDate?: string;\n  /** The human language code in which the Expression is drafted */\n  @Prop({ reflect: true, mutable: true }) frbrLanguage?: string;\n\n  /** Fetch content from Laws.Africa services? Requires a Laws.Africa partnership and the frbrExpressionUri property to be set. */\n  @Prop({ reflect: true, mutable: true }) fetch = false;\n  /** Partner code to use when fetching content from Laws.Africa. Defaults to the `location.hostname`. */\n  @Prop({ reflect: true, mutable: true }) partner?: string;\n\n  /** Provider URL for fetching content (advanced usage only). */\n  @Prop() provider = PROVIDER;\n\n  @Element() el!: HTMLElement;\n\n  @Watch('provider')\n  @Watch('fetch')\n  refetch() {\n    this.fetchContent();\n  }\n\n  @Watch('frbrExpressionUri')\n  parseFrbrExpressionUri(newValue: string) {\n    /*eslint-disable */\n    const ex =\n      '^(/(?<prefix>akn))/(?<country>[a-z]{2})(-(?<locality>[^/]+))?/(?<doctype>[^/]+)(/(?<subtype>[^0-9][^/]*))?(/(?<actor>[^0-9][^/]*))?/(?<date>[0-9]{4}(-[0-9]{2}(-[0-9]{2})?)?)/(?<number>[^/]+)(/(((?<language>[a-z]{3})(?<expression_date>[@:][^/]*)?(/!?(?<expression_component>[^/]+?)?(/(?<expression_subcomponent>[^.]+))?)?(.(?<format>[a-z0-9]+))?)|!?(?<work_component>[^/]+)))?$';\n    const regExp = new RegExp(ex, 'g');\n    const output = regExp.exec(newValue);\n    if (output?.groups) {\n      Object.keys(output.groups).forEach((key) => {\n        if (output.groups?.[key]) {\n          switch (key) {\n            case 'country':\n              if (!this.frbrCountry) this.frbrCountry = output.groups[key];\n              break;\n            case 'doctype':\n              if (!this.frbrType) this.frbrType = output.groups[key];\n              break;\n            case 'subtype':\n              if (!this.frbrSubtype) this.frbrSubtype = output.groups[key];\n              break;\n            case 'actor':\n              if (!this.frbrAuthor) this.frbrAuthor = output.groups[key];\n              break;\n            case 'date':\n              if (!this.frbrDate) this.frbrDate = output.groups[key];\n              break;\n            case 'number':\n              if (!this.frbrNumber) this.frbrNumber = output.groups[key];\n              break;\n            case 'expression_date':\n              if (!this.frbrExpressionDate) {\n                this.frbrExpressionDate = output.groups[key].replace('@', '').replace(':', '');\n              }\n              break;\n            case 'language':\n              if (!this.frbrLanguage) this.frbrLanguage = output.groups[key];\n              break;\n          }\n        }\n      });\n    }\n\n    this.fetchContent();\n  }\n\n  async fetchContent() {\n    this.ensurePartner();\n\n    if (this.fetch && this.frbrExpressionUri && this.provider) {\n      const url = this.provider + '/p/' + this.partner + '/e/portion' + this.frbrExpressionUri;\n      try {\n        const resp = await fetch(url);\n        if (resp.ok) {\n          this.el.innerHTML = await resp.text();\n        }\n      } catch (error) {\n        // ignore\n      }\n    }\n  }\n\n  ensurePartner() {\n    if (!this.partner) {\n      this.partner = getPartner();\n    }\n  }\n\n  componentWillLoad() {\n    if (this.frbrExpressionUri) this.parseFrbrExpressionUri(this.frbrExpressionUri);\n  }\n}\n"],"mappings":";;;4IAAA,IAAMA,cAAgB,qu8DACtB,IAAAC,mBAAeD,c,ICOFE,WAAU,W,2SAyC2B,M,qCAK7BC,Q,CAMnBC,EAAAC,UAAAC,QAAA,WACEC,KAAKC,c,EAIPJ,EAAAC,UAAAI,uBAAA,SAAuBC,GAAvB,IAAAC,EAAAJ,KAEE,IAAMK,EACJ,2XACF,IAAMC,EAAS,IAAIC,OAAOF,EAAI,KAC9B,IAAMG,EAASF,EAAOG,KAAKN,GAC3B,GAAIK,IAAM,MAANA,SAAM,SAANA,EAAQE,OAAQ,CAClBC,OAAOC,KAAKJ,EAAOE,QAAQG,SAAQ,SAACC,G,MAClC,IAAIC,EAAAP,EAAOE,UAAM,MAAAK,SAAA,SAAAA,EAAGD,GAAM,CACxB,OAAQA,GACN,IAAK,UACH,IAAKV,EAAKY,YAAaZ,EAAKY,YAAcR,EAAOE,OAAOI,GACxD,MACF,IAAK,UACH,IAAKV,EAAKa,SAAUb,EAAKa,SAAWT,EAAOE,OAAOI,GAClD,MACF,IAAK,UACH,IAAKV,EAAKc,YAAad,EAAKc,YAAcV,EAAOE,OAAOI,GACxD,MACF,IAAK,QACH,IAAKV,EAAKe,WAAYf,EAAKe,WAAaX,EAAOE,OAAOI,GACtD,MACF,IAAK,OACH,IAAKV,EAAKgB,SAAUhB,EAAKgB,SAAWZ,EAAOE,OAAOI,GAClD,MACF,IAAK,SACH,IAAKV,EAAKiB,WAAYjB,EAAKiB,WAAab,EAAOE,OAAOI,GACtD,MACF,IAAK,kBACH,IAAKV,EAAKkB,mBAAoB,CAC5BlB,EAAKkB,mBAAqBd,EAAOE,OAAOI,GAAKS,QAAQ,IAAK,IAAIA,QAAQ,IAAK,G,CAE7E,MACF,IAAK,WACH,IAAKnB,EAAKoB,aAAcpB,EAAKoB,aAAehB,EAAOE,OAAOI,GAC1D,M,KAMVd,KAAKC,c,EAGDJ,EAAAC,UAAAG,aAAN,W,wHACED,KAAKyB,gB,KAEDzB,KAAK0B,OAAS1B,KAAK2B,mBAAqB3B,KAAK4B,UAA7C,YACIC,EAAM7B,KAAK4B,SAAW,MAAQ5B,KAAK8B,QAAU,aAAe9B,KAAK2B,kB,uCAExD,SAAMD,MAAMG,I,OAAnBE,EAAOC,EAAAC,O,IACTF,EAAKG,GAAL,YACFC,EAAAnC,KAAKoC,GAAe,SAAML,EAAKM,Q,OAA/BF,EAAQG,UAAYN,EAAAC,O,oFAQ5BpC,EAAAC,UAAA2B,cAAA,WACE,IAAKzB,KAAK8B,QAAS,CACjB9B,KAAK8B,QAAUS,Y,GAInB1C,EAAAC,UAAA0C,kBAAA,WACE,GAAIxC,KAAK2B,kBAAmB3B,KAAKE,uBAAuBF,KAAK2B,kB,qTA5H1C,G","ignoreList":[]}