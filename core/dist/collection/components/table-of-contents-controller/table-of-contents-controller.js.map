{"version":3,"file":"table-of-contents-controller.js","sourceRoot":"","sources":["../../../src/components/table-of-contents-controller/table-of-contents-controller.tsx"],"names":[],"mappings":"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","sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport { Component, Prop, h, Host, State, Element } from '@stencil/core';\nimport debounce from 'lodash/debounce';\n\nimport { PROVIDER } from '../../utils/services';\nimport type { TOCItem } from '../table-of-contents/table-of-contents';\n\n@Component({\n  tag: 'la-table-of-contents-controller',\n  styleUrl: 'table-of-contents-controller.scss',\n})\nexport class TableOfContentsController {\n  /**\n   * JSON value of array of items or string value parsed to array of items used to build the table of contents. Each\n   * item must have a `title` attribute (which may be `null`), and a `children` attribute (which may be `null`).\n   * */\n  @Prop() items: TOCItem[] | string = [];\n\n  /**\n   * Placeholder for search title filter\n   * */\n  @Prop() titleFilterPlaceholder = 'Search the table of contents';\n\n  /**\n   * If true, hides clear title filter button\n   */\n  @Prop() hideClearTitleFilterButton = false;\n\n  /**\n   * Additional classes added to title filter button\n   */\n  @Prop() titleFilterClearBtnClasses = '';\n\n  /**\n   * Additional classes added to Expand all button\n   * */\n  @Prop() expandAllBtnClasses = '';\n\n  /**\n   * Additional classes added to Collapse all button\n   * */\n  @Prop() collapseAllBtnClasses = '';\n\n  /**\n   * Button text for expand all button\n   * */\n  @Prop() expandAllBtnText = 'Expand all';\n\n  /**\n   * Button text for collapse all button\n   * */\n  @Prop() collapseAllBtnText = 'Collapse all';\n\n  /** Should the table of contents be expanded when first created? */\n  @Prop() expanded = true;\n\n  /**\n   * Additional CSS classes added to the search filter input\n   * */\n  @Prop() titleFilterInputClasses = '';\n\n  /** Full Akoma Ntoso FRBR Expression URI to fetch TOC information for. Only used if `fetch` is set. */\n  @Prop({ reflect: true, mutable: true }) frbrExpressionUri?: string;\n  /** Fetch content from Laws.Africa services? Requires a Laws.Africa partnership and the frbrExpressionUri property to be set. */\n  @Prop({ reflect: true, mutable: true }) fetch = false;\n  /** Partner code to use when fetching content from Laws.Africa. Defaults to the `location.hostname`. */\n  @Prop({ reflect: true, mutable: true }) partner?: string;\n  /** Provider URL for fetching content (advanced usage only). */\n  @Prop() provider = PROVIDER;\n\n  @State() titleFilter = '';\n  @Element() el!: HTMLElement;\n\n  handleTitleChange = debounce((e: Event) => {\n    this.titleFilter = (e.target as HTMLInputElement).value;\n  }, 300);\n\n  clearTitleFilter() {\n    this.titleFilter = '';\n  }\n\n  async expandAll() {\n    const tocElement = this.el.querySelector('la-table-of-contents');\n    tocElement?.expandAll();\n  }\n\n  async collapseAll() {\n    const tocElement = this.el.querySelector('la-table-of-contents');\n    tocElement?.collapseAll();\n  }\n\n  render() {\n    const renderHideClearFilterButton = () => {\n      if (this.hideClearTitleFilterButton) {\n        return null;\n      }\n      return (\n        <button\n          class={`search__clear-btn ${this.titleFilterClearBtnClasses}`}\n          type=\"button\"\n          onClick={() => this.clearTitleFilter()}\n          disabled={!this.titleFilter}\n        >\n          <slot name=\"clear-title-filter-icon\">âœ•</slot>\n        </button>\n      );\n    };\n\n    return (\n      <Host>\n        <div class=\"search\">\n          <input\n            class={`search__input ${this.titleFilterInputClasses}`}\n            value={this.titleFilter}\n            placeholder={this.titleFilterPlaceholder}\n            onInput={(e) => this.handleTitleChange(e)}\n          />\n          {renderHideClearFilterButton()}\n        </div>\n        <div class=\"toggle\">\n          <button\n            type=\"button\"\n            class={`toggle__expand-all-btn ${this.expandAllBtnClasses}`}\n            onClick={() => this.expandAll()}\n          >\n            {this.expandAllBtnText}\n          </button>\n          <button\n            type=\"button\"\n            class={`toggle__collapse-all-btn ${this.collapseAllBtnClasses}`}\n            onClick={() => this.collapseAll()}\n          >\n            {this.collapseAllBtnText}\n          </button>\n        </div>\n\n        <la-table-of-contents\n          items={this.items}\n          titleFilter={this.titleFilter}\n          fetch={this.fetch}\n          provider={this.provider}\n          partner={this.partner}\n          frbr-expression-uri={this.frbrExpressionUri}\n          expanded={this.expanded}\n        >\n          <span slot=\"expand-icon\">\n            <slot name=\"expand-icon\"></slot>\n          </span>\n          <span slot=\"collapse-icon\">\n            <slot name=\"collapse-icon\"></slot>\n          </span>\n        </la-table-of-contents>\n      </Host>\n    );\n  }\n}\n"]}